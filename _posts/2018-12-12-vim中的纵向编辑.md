---
title: vim中的纵向编辑
date: 2018-12-12 17:41:50
tags: vim
categories: vim
---

在 Vim 命令模式下，移动游标定位于某一个位置，键入`ctrl-v`后状态栏上出现`VISUAL BLOCK`字样，即进入纵向编辑模式。
移动游标以按需选择待编辑的区域。

<!-- more -->

将数列：
```
10.1.5.214
10.1.5.212
10.1.5.210
```
编辑成序列：
```
ping -c 4 10.5.5.214 >> result0
ping -c 4 10.5.5.212 >> result0
ping -c 4 10.5.5.210 >> result0
```
这是一个将 IP 数列修改成可执行的 ping 命令序列的过程。

### 第一步：修改 -r
将IP数列中第二段所有数字“1”修改为“5”：

1. 将游标定位第一个行IP地址第二段的“1”
2. `ctrl-v`进入纵向编辑模式
3. `G`移动游标到最后一行，可视块覆盖所要修改的列
4. `r`进入修改模式
5. `5`输入数字“5”
6. `ESC`退出纵向编辑模式，同时所有被选中的数字都被改成了“5”，并回到命令模式

结果如下：
```
10.5.5.214
10.5.5.212
10.5.5.210
```

### 第二步：前添加 -I
在所有行之前添加“ping – c 4 ”：

1. 将游标定位到第一行第一列
2. `ctrl-v`进入纵向编辑模式
3. `G`移动游标到最后一行第一列，可视块覆盖了第一列
4. `I`进入行首插入模式
5. `ping -c 4`输入所要求字符“ping – c 4 ”
6. `ESC`退出纵向编辑模式的同时所有选中的字符前都添加了“ping – c 4 ”，回到命令模式

结果如下：
```
ping -c 4 10.5.5.214
ping -c 4 10.5.5.212
ping -c 4 10.5.5.210
```

### 第三步：后添加
在所有行之后添加“>> result0”：

1. 将游标定位到第一行最后一列
2. `ctrl-v`进入纵向编辑模式
3. `G`移动游标到最后一行最后一列，`VISUAL BLOCK`覆盖了最后一列
4. `A`进入行尾插入模式
5. `>> result0`输入所要求字符“>> result0”
6. `ESC`退出纵向编辑模式的同时所有选中的字符后都添加了“ >> result0”，回到命令模式

结果如下：
```
ping -c 4 10.5.5.214 >> result0
ping -c 4 10.5.5.212 >> result0
ping -c 4 10.5.5.210 >> result0
```

参考：
[技巧：Vim 的纵向编辑模式](https://www.ibm.com/developerworks/cn/linux/l-cn-vimcolumn/index.html)
